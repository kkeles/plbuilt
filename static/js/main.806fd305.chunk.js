(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{151:function(e,t,n){e.exports=n(247)},156:function(e,t,n){},163:function(e,t){},247:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(83),l=n.n(c),u=(n(156),n(8)),o=n.n(u),i=n(22),s=n(7),m=n(27),p=Object(a.createContext)(),f=function(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],l=n[1],u=Object(a.useState)(!1),f=Object(s.a)(u,2),b=f[0],E=f[1],h=Object(a.useState)(""),g=Object(s.a)(h,2),d=g[0],v=g[1],j=Object(a.useState)(""),O=Object(s.a)(j,2),w=O[0],x=O[1],y=Object(a.useState)(),I=Object(s.a)(y,2),C=I[0],k=I[1],F=Object(a.useState)(),S=Object(s.a)(F,2),D=S[0],G=S[1];Object(a.useEffect)(function(){function e(){return(e=Object(i.a)(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.currentAuthenticatedUser();case 2:t=e.sent,n=t.attributes,x(n.name),v(n.email);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]);var N={signedUp:b,setSignedUp:E,loggedIn:c,setLoggedIn:l,email:d,setEmail:v,name:w,setName:x,groupsMembered:C,setGroupsMembered:k,groupsAdmined:D,setGroupsAdmined:G};return r.a.createElement(p.Provider,{value:N},e.children)},b=n(29),E=n.n(b),h=n(80),g=n.n(h),d=Object(a.createContext)(),v=function(e){var t="https://h2genw4y7b.execute-api.eu-central-1.amazonaws.com/dev",n=Object(a.useContext)(p),c=Object(a.useState)(""),l=Object(s.a)(c,2),u=l[0],m=l[1],f=n.email,b=n.setGroupsMembered,h=n.setGroupsAdmined,v=Object(a.useState)(),j=Object(s.a)(v,2),O=j[0],w=j[1],x=Object(a.useState)(),y=Object(s.a)(x,2),I=y[0],C=y[1],k=function(e,n,a){E.a.post(t+"/user/update",{userID:e,groupRole:n,groupID:a})},F={startGroup:function(e,n){E.a.post("".concat(t,"/group/start"),{groupID:e,groupAdmin:f,memberName:n,groupMembers:[f]}).then(function(t){console.log("Successfully created table.",e),k(f,"admin",e)}).catch(function(e){console.error(e)})},joinGroup:function(e,n,a,r){E.a.post("".concat(t,"/group/join"),{groupID:e,memberID:n,memberName:a,isNonAdmin:r})},userToUsersTable:function(e,n){E.a.post(t+"/user",{email:e,name:n,groupsadmined:[""],groupsmembered:[""]})},getUserGroups:function(){var e=Object(i.a)(o.a.mark(function e(){var n,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g()("".concat(t,"/user?userID=").concat(f),{method:"GET",headers:{accept:"application/json"}});case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("Error! status: ".concat(n.status));case 6:return e.next=8,n.json();case 8:return a=e.sent,h(a.Item.userGroupsAdmined),b(a.Item.userGroupsMembered),e.abrupt("return",a);case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}},e,null,[[0,14]])}));return function(){return e.apply(this,arguments)}}(),refGroupID:u,setRefGroupID:m,memberReceipts:O,setMemberReceipts:w,getMemberReceipts:function(){var e=Object(i.a)(o.a.mark(function e(n,a){var r,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g()("".concat(t,"/receipt?groupID=").concat(n,"&userID=").concat(a),{method:"GET",headers:{accept:"application/json"}});case 3:if((r=e.sent).ok){e.next=6;break}throw new Error("Error! status: ".concat(r.status));case 6:return e.next=8,r.json();case 8:return c=e.sent,e.abrupt("return",c);case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t,n){return e.apply(this,arguments)}}(),addReceipt:function(){var e=Object(i.a)(o.a.mark(function e(n,a,r,c){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:E.a.post("".concat(t,"/receipt/add"),{groupID:n,memberID:f,note:a,date:r,amount:c}).then(function(e){return e.data.body}).catch(function(e){console.error(e)});case 1:case"end":return e.stop()}},e)}));return function(t,n,a,r){return e.apply(this,arguments)}}(),deleteReceipt:function(e,n,a){E.a.post("".concat(t,"/receipt/delete"),{groupID:e,memberID:n,listNum:a}).then(function(e){return e}).catch(function(e){console.error(e)})},isFinishedToggle:function(e,n,a){E.a.post("".concat(t,"/user/member"),{groupID:e,memberID:n,toFinish:a}).then(function(e){return e}).catch(function(e){console.error(e)})},finishReceipt:function(e,n,a,r){var c=0;"finish"===r&&a.map(function(e){return c+=e[2]}),E.a.post("".concat(t,"/receipt/finish"),{groupID:e,memberID:n,totalNum:c.toString(),action:r}).then(function(e){return e}).catch(function(e){console.error(e)})},getGroupMembersInfo:function(){var e=Object(i.a)(o.a.mark(function e(n){var a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g()("".concat(t,"/group?groupID=").concat(n),{method:"GET",headers:{accept:"application/json"}});case 3:if((a=e.sent).ok){e.next=6;break}throw new Error("Error! status: ".concat(a.status));case 6:return e.next=8,a.json();case 8:return r=e.sent,e.abrupt("return",r);case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t){return e.apply(this,arguments)}}(),groupFinalizer:function(){var e=Object(i.a)(o.a.mark(function e(n,a){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(t,"/group/finalize"),{groupID:n,membersArr:a}).then(function(e){var t=e.data.body.toString();return t=JSON.parse(t),C(t),t}).catch(function(e){console.error(e)});case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),finishedAdminTable:I,setFinishedAdminTable:C,checkGroupFinalized:function(){var e=Object(i.a)(o.a.mark(function e(n){var a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g()("".concat(t,"/group/finalize?groupID=").concat(n),{method:"GET",headers:{accept:"application/json"}});case 3:if((a=e.sent).ok){e.next=6;break}throw new Error("Error! status: ".concat(a.status));case 6:return e.next=8,a.json();case 8:return r=e.sent,e.abrupt("return",r);case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t){return e.apply(this,arguments)}}()};return r.a.createElement(d.Provider,{value:F},e.children)},j=n(49),O={aws_project_region:"eu-central-1",aws_cognito_identity_pool_id:"eu-central-1:481c0076-c808-4e88-9f88-796dd76e935f",aws_cognito_region:"eu-central-1",aws_user_pools_id:"eu-central-1_ytboDFipN",aws_user_pools_web_client_id:"p066rdurcppg20lkdkh5g1bvu",oauth:{},aws_cognito_username_attributes:["EMAIL"],aws_cognito_social_providers:[],aws_cognito_signup_attributes:["EMAIL"],aws_cognito_mfa_configuration:"OFF",aws_cognito_mfa_types:["SMS"],aws_cognito_password_protection_settings:{passwordPolicyMinLength:8,passwordPolicyCharacters:[]},aws_cognito_verification_mechanisms:["EMAIL"]},w=n(52),x=n(0),y=n(78),I=function(){return r.a.createElement(a.Fragment,null,r.a.createElement("h2",null,"You are not logged in. Please log in or sign up first"),r.a.createElement("br",null),r.a.createElement("a",{href:"/login"},r.a.createElement("h1",null,"Log In")),r.a.createElement("a",{href:"/signup"},r.a.createElement("h1",null,"Sign Up")))},C=function(){var e=Object(a.useContext)(p),t=Object(a.useContext)(d),n=e.email,c=e.groupsMembered,l=e.groupsAdmined,u=t.getMemberReceipts,s=Object(x.f)(),m=function(){var e=Object(i.a)(o.a.mark(function e(t,n,a){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t,n);case 2:s("/viewgroup/".concat(a,"/").concat(t),{replace:!0});case 3:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),f=function(e,t){return e?e.map(function(e){return r.a.createElement("h3",{style:{cursor:"pointer"},key:e,onClick:function(){m(e,n,t)}},e)}):r.a.createElement("div",null)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"Groups Membered:"),f(c,"member"),r.a.createElement("div",null,"Groups Admined:"),f(l,"admin"))},k=n(136),F=function(){var e=Object(x.f)(),t=Object(a.useContext)(d),n=Object(a.useContext)(p).name,c=Object(a.useState)(!1),l=Object(s.a)(c,2),u=l[0],m=l[1],f=[t.refGroupID,t.setRefGroupID],b=f[0],E=f[1],h=t.startGroup,g=t.getUserGroups;Object(a.useEffect)(function(){var e=Object(k.a)(1e5,999999)().toString();E(e)},[E]);var v=function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:g(),m(!0);case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement(a.Fragment,null,r.a.createElement("div",null,"hello ",n),r.a.createElement("h3",{style:{cursor:"pointer"},onClick:function(){h(b,n),e("/startgroup",{replace:!0})}},"Start a New Group"),r.a.createElement("h3",{style:{cursor:"pointer"},onClick:function(){e("/joingroup",{replace:!0})}},"Join a Group"),r.a.createElement("h3",{style:{cursor:"pointer"},onClick:v},"Continue a Group"),r.a.createElement("br",null),u?r.a.createElement(C,null):r.a.createElement("div",null))},S=function(){var e=Object(a.useContext)(p),t=[e.loggedIn,e.setLoggedIn],n=t[0],c=t[1],l=e.setEmail;return Object(a.useEffect)(function(){y.a.currentAuthenticatedUser({bypassCache:!1}).then(function(e){c(!0),l(e.attributes.email)}).catch(function(e){return console.log(e)})},[c,l]),r.a.createElement(a.Fragment,null,n?r.a.createElement(F,null):r.a.createElement(I,null))},D=function(){var e=Object(x.f)(),t=Object(a.useContext)(p),n=[t.loggedIn,t.setLoggedIn],c=n[0],l=n[1];function u(){return(u=Object(i.a)(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.signOut().then(function(){e("/",{replace:!0}),window.location.reload()});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log("error signing out: ",t.t0);case 8:case"end":return t.stop()}},t,null,[[0,5]])}))).apply(this,arguments)}return Object(a.useEffect)(function(){y.a.currentAuthenticatedUser({bypassCache:!1}).then(function(e){return l(e)}).catch(function(e){return console.log(e)})},[l]),r.a.createElement("header",{className:"App-header"},r.a.createElement("nav",null,r.a.createElement(w.b,{to:"/"},"Home"),c?r.a.createElement("button",{onClick:function(){return u.apply(this,arguments)}},"Log Out"):r.a.createElement("h1",null," ")))},G=function(){var e=Object(a.useContext)(p),t=[e.email,e.setEmail],n=t[0],c=t[1],l=Object(a.useState)(""),u=Object(s.a)(l,2),o=u[0],i=u[1],m=e.setLoggedIn,f=Object(x.f)();return r.a.createElement(a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),y.a.signIn(n,o).then(function(e){m(e),f("/",{replace:!0}),window.location.reload()}).catch(function(e){console.error("error",e)})}},r.a.createElement("label",{htmlFor:"email"},"E-mail: "),r.a.createElement("input",{value:n,onChange:function(e){return c(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"password"},"Password: "),r.a.createElement("input",{type:"password",value:o,onChange:function(e){return i(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit"},"Login")))},N=function(){var e=Object(a.useContext)(p),t=Object(a.useContext)(d),n=Object(a.useState)(""),c=Object(s.a)(n,2),l=c[0],u=c[1],m=Object(x.f)(),f=function(){var n=Object(i.a)(o.a.mark(function n(a){var r,c,u;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),r=e.email,c=e.name,u=t.userToUsersTable,n.prev=4,n.next=7,y.a.confirmSignUp(r,l);case 7:u(r,c),m("/",{replace:!0}),window.location.reload(),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(4),console.log("error confirming sign up",n.t0);case 15:case"end":return n.stop()}},n,null,[[4,12]])}));return function(e){return n.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"You will receive a confirmation code shortly. Please enter the code below."),r.a.createElement("form",{onSubmit:f},r.a.createElement("label",{htmlFor:"email"},"Confirmation code: "),r.a.createElement("input",{value:l,onChange:function(e){return u(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit"},"Confirm")))},_=function(){var e=Object(a.useContext)(p),t=[e.email,e.setEmail],n=t[0],c=t[1],l=Object(a.useState)(""),u=Object(s.a)(l,2),m=u[0],f=u[1],b=[e.name,e.setName],E=b[0],h=b[1],g=[e.signedUp,e.setSignedUp],d=g[0],v=g[1],j=function(){var e=Object(i.a)(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,v(!0),e.next=5,y.a.signUp({username:n,password:m,attributes:{name:E}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("error signing up:",e.t0);case 10:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:j},r.a.createElement("label",{htmlFor:"email"},"E-mail: "),r.a.createElement("input",{value:n,onChange:function(e){return c(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"name"},"Name: "),r.a.createElement("input",{value:E,onChange:function(e){return h(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"password"},"Password: "),r.a.createElement("input",{type:"password",value:m,onChange:function(e){return f(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit"},"Sign Up")),d?r.a.createElement(N,null):r.a.createElement("div",null,"Sign up first"))},A=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],l=Object(a.useContext)(p),u=l.name,o=l.email,i=Object(a.useContext)(d).joinGroup,m=Object(x.f)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Enter the group ID you would like to join: "),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i(n,o,u,!0),m("/viewgroup/member/".concat(n),{replace:!0})}},r.a.createElement("label",{htmlFor:"groupID"},"Group ID "),r.a.createElement("input",{value:n,onChange:function(e){return c(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit"},"Join")))},M=function(){var e=Object(x.f)();return Object(a.useEffect)(function(){setTimeout(function(){e("/groupstarted",{replace:!0})},4e3)},[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Creating Group..."),r.a.createElement("h2",null,"Please wait..."))},R=n(137),T=n.n(R),U=function(){var e=Object(a.useContext)(p),t=Object(a.useContext)(d),n=e.email,c=e.name,l=t.joinGroup,u=t.refGroupID,o=Object(x.f)();Object(a.useEffect)(function(){setTimeout(function(){l(u,n,c,!1)},1e3)},[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,r.a.createElement(T.a,{value:"https://plexi.app/"+u})),r.a.createElement("h2",null,"Share the code below to invite:"),r.a.createElement("h2",null,"plexi.app/",r.a.createElement("b",null,u)),r.a.createElement("h2",{style:{cursor:"pointer"},onClick:function(){setTimeout(function(){o("/viewgroup/admin/".concat(u),{replace:!0}),window.location.reload()},1500)}},"visit the Group"))},L=n(85),Y=n(277),z=n(281),P=n(280),J=n(275),B=n(278),W=n(279),H=n(276),q=n(227),K=n.n(q),Q=n(273);function V(e){var t=e.props,n=r.a.useContext(d).deleteReceipt,a=Object(x.f)(),c=function(){var e=[];return t.groupReceipts.map(function(t){return e.push(Object(L.a)({},t))}),e}();return r.a.createElement(J.a,{component:H.a},r.a.createElement(Y.a,{sx:{maxWidth:450},"aria-label":"simple table"},r.a.createElement(B.a,null,r.a.createElement(W.a,null,r.a.createElement(P.a,{align:"center"},"Note"),r.a.createElement(P.a,{align:"center"},"Date"),r.a.createElement(P.a,{align:"center"},"Amount\xa0(\u20ac)"),!t.memberFinished&&r.a.createElement(P.a,{align:"center"}))),r.a.createElement(z.a,null,c.map(function(e,c){return r.a.createElement(W.a,{key:e[0],sx:{"&:last-child td, &:last-child th":{border:0}}},r.a.createElement(P.a,{align:"center"},e[0]),r.a.createElement(P.a,{align:"center"},e[1]),r.a.createElement(P.a,{align:"center"},e[2]),!t.memberFinished&&r.a.createElement(P.a,{onClick:function(){var e;e=c,n(t.groupnr,t.memberID,e),a("/viewgroup/success/".concat(t.groupnr,"/").concat(t.role),{replace:!0})},oalign:"center"},r.a.createElement(Q.a,{"aria-label":"delete",disabled:!0,color:"primary"},r.a.createElement(K.a,null))))}))))}var X=n(53),Z=(n(130),function(e){var t=e.props,n=r.a.useState(""),a=Object(s.a)(n,2),c=a[0],l=a[1],u=r.a.useState(""),o=Object(s.a)(u,2),i=o[0],m=o[1],p=r.a.useState(""),f=Object(s.a)(p,2),b=f[0],E=f[1],h=r.a.useContext(d).addReceipt,g=Object(x.f)(),v=function(e){e.preventDefault();var n=i.split("-"),a="".concat(n[2]," ").concat(n[1]," ").concat(n[0]);h(t.groupnr,c,a,b);var r="/viewgroup/success/".concat(t.groupnr,"/").concat(t.role);g(r,{replace:!0})};return r.a.createElement(X.a,{trigger:r.a.createElement("button",{className:"button"}," Add Receipt "),modal:!0,nested:!0},function(e){return r.a.createElement("div",{className:"modal"},r.a.createElement("button",{className:"close",onClick:e},"\xd7"),r.a.createElement("form",{onSubmit:v},r.a.createElement("label",{htmlFor:"note"},"Note: "),r.a.createElement("input",{value:c,onChange:function(e){return l(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"date"},"Date: "),r.a.createElement("input",{type:"date",value:i,onChange:function(e){return m(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"amount"},"Amount: "),r.a.createElement("input",{value:b,onChange:function(e){return E(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit"},"Submit")),r.a.createElement("br",null))})}),$=function(e){var t=e.props,n=Object(x.f)(),a=r.a.useContext(d),c=a.isFinishedToggle,l=a.finishReceipt;return r.a.createElement(X.a,{trigger:r.a.createElement("button",{className:"button"}," I'm all set! "),modal:!0,nested:!0},function(e){return r.a.createElement("div",{className:"modal"},r.a.createElement("button",{className:"close",onClick:e},"\xd7"),r.a.createElement("div",{className:"header"}," ",r.a.createElement("h2",null,"Are you sure you are done? ")),r.a.createElement("div",{className:"content"},"You won't have a chance to add or change any receipts anymore."),r.a.createElement("br",null),r.a.createElement("div",{className:"actions"},r.a.createElement("button",{className:"button",onClick:function(){var e,a;e=t.groupnr,a=t.memberID,c(e,a,"true"),l(e,a,t.groupReceipts,"finish"),setTimeout(function(){n(0)},200)}},"Yes, I'm done!"),r.a.createElement("button",{className:"button",onClick:function(){e()}},"No, take me back")))})},ee=function(){var e=Object(a.useContext)(d),t=Object(x.g)("").groupnr,n=[Object(a.useContext)(p).email,Object(a.useContext)(p).setEmail],c=n[0],l=n[1],u=Object(a.useState)(!1),f=Object(s.a)(u,2),b=f[0],E=f[1],h=e.getMemberReceipts,g=e.checkGroupFinalized,v=e.setFinishedAdminTable,j=Object(a.useState)(!0),O=Object(s.a)(j,2),w=O[0],y=O[1],I=[e.memberReceipts,e.setMemberReceipts],C=I[0],k=I[1],F=Object(x.f)();Object(a.useEffect)(function(){m.a.currentAuthenticatedUser({bypassCache:!1}).then(function(e){l(e.attributes.email)}).catch(function(e){return console.log(e)})},[]);var S={groupnr:t,memberID:c,groupReceipts:C,memberFinished:b,role:"member"},D=function(){var e=Object(i.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.currentAuthenticatedUser({bypassCache:!0});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)(function(){D().then(function(e){l(e.attributes.email),h(t,e.attributes.email).then(function(e){if(e.Item.isFinished&&E(e.Item.isFinished),e.Item.memberReceipts.length>0){y(!1);var t=e.Item.memberReceipts;k(t)}})})},[]),Object(a.useEffect)(Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t).then(function(e){if(console.log(e),e&&e.Item.isFinalized.BOOL){var n=JSON.parse(e.Item.finalTransferLog.S);v(n),setTimeout(function(){F("/viewgroup/member/final/".concat(t),{replace:!0})},500)}});case 2:case"end":return e.stop()}},e)})),[]),b?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Group ",t),w?r.a.createElement("h2",null,"You don't have any receipts yet"):r.a.createElement("h2",null,"here are your receipts:"),w?r.a.createElement("div",null):r.a.createElement(V,{props:S}),r.a.createElement("br",null),r.a.createElement("h2",null,"You are all set! You can't add receipts anymore!"),r.a.createElement("h3",null,"Please contact your group admin if you want any changes.")):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Group ",t),w?r.a.createElement("h2",null,"You don't have any receipts yet"):r.a.createElement("h2",null,"here are your receipts:"),w?r.a.createElement("div",null):r.a.createElement(V,{props:S}),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(Z,{props:S}),"   ",r.a.createElement($,{props:S})),r.a.createElement("br",null))},te=n(38),ne=function(e){var t=e.groupMembers,n=e.groupID,a=r.a.useContext(d).groupFinalizer,c=Object(x.f)();return r.a.createElement(X.a,{trigger:r.a.createElement("button",{className:"button"}," Finalize the Group "),modal:!0,nested:!0},function(e){return r.a.createElement("div",{className:"modal"},r.a.createElement("button",{className:"close",onClick:e},"\xd7"),r.a.createElement("div",{className:"header"}," ",r.a.createElement("h2",null,"Are you sure the group is finished? ")),r.a.createElement("div",{className:"content"},"You won't have a chance to add or change any receipts anymore."),r.a.createElement("br",null),r.a.createElement("div",{className:"actions"},r.a.createElement("button",{className:"button",onClick:function(){a(n,t),setTimeout(function(){c("/viewgroup/admin/final/".concat(n),{replace:!0})},500)}},"Yes, We are done!"),r.a.createElement("button",{className:"button",onClick:function(){e()}},"No, take me back")))})},ae=function(e){var t=e.groupID,n=Object(a.useContext)(d),c=n.getGroupMembersInfo,l=n.isFinishedToggle,u=n.finishReceipt,m=Object(a.useState)(),p=Object(s.a)(m,2),f=p[0],b=p[1],E=Object(a.useState)(!1),h=Object(s.a)(E,2),g=h[0],v=h[1],j=Object(a.useState)(!0),O=Object(s.a)(j,2),w=O[0],y=O[1],I=Object(x.f)(),C=function(){var e=Object(i.a)(o.a.mark(function e(){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,c(t).then(function(e){e.forEach(function(e){n.push(Object(L.a)({},e))}),v(!0)});case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();r.a.useEffect(function(){C().then(function(e){return e.forEach(function(e){b(function(t){return[].concat(Object(te.a)(t),[e])})}),e}).then(function(e){k(e)})},[]);var k=function(e){e.forEach(function(e){e.isFinished||y(!1)})},F=function(e,n,a){var r="finish";"false"===a&&(r="revoke"),l(t,n,a),u(t,n,e,r),setTimeout(function(){I(0)},500)};return g?r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{component:H.a},r.a.createElement(Y.a,{sx:{maxWidth:450},"aria-label":"simple table"},r.a.createElement(B.a,null,r.a.createElement(W.a,null,r.a.createElement(P.a,{align:"center"},"E-mail"),r.a.createElement(P.a,{align:"center"},"Name"),r.a.createElement(P.a,{align:"center"},"Status"),r.a.createElement(P.a,{align:"center"},"Total Expense"))),r.a.createElement(z.a,null,f.map(function(e){return r.a.createElement(W.a,{key:e.memberID,sx:{"&:last-child td, &:last-child th":{border:0}}},r.a.createElement(P.a,{align:"center"},e.memberID),r.a.createElement(P.a,{align:"center"},e.memberName),r.a.createElement(P.a,{align:"center"},e.isFinished?r.a.createElement("div",null,"Finished ",r.a.createElement("button",{onClick:function(){return F(0,e.memberID,"false")}},"\u238c")," "):r.a.createElement("div",null,"In Progress ",r.a.createElement("button",{onClick:function(){return F(e.memberReceipts,e.memberID,"true")}},"\u2713")," ")),e.isFinished&&r.a.createElement(P.a,{align:"center"},e.totalExpense))})))),r.a.createElement("br",null),w?r.a.createElement("h2",null,"All users are set! ",r.a.createElement(ne,{groupID:t,groupMembers:f})," "):r.a.createElement("h2",null,"Some users are still working on it!")):r.a.createElement(r.a.Fragment,null,"Loading...")},re=function(){var e=Object(a.useContext)(d),t=Object(x.g)("").groupnr,n=Object(a.useState)(""),c=Object(s.a)(n,2),l=c[0],u=c[1],p=Object(a.useState)(!1),f=Object(s.a)(p,2),b=f[0],E=f[1],h=e.getMemberReceipts,g=e.checkGroupFinalized,v=Object(a.useState)(!0),j=Object(s.a)(v,2),O=j[0],w=j[1],y=[e.memberReceipts,e.setMemberReceipts],I=y[0],C=y[1],k=e.setFinishedAdminTable,F=Object(x.f)(),S={groupnr:t,memberID:l,groupReceipts:I,memberFinished:b,role:"admin"},D=function(){var e=Object(i.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.currentAuthenticatedUser({bypassCache:!0});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)(function(){D().then(function(e){u(e.attributes.email),h(t,e.attributes.email).then(function(e){try{if(E(e.Item.isFinished),e.Item.memberReceipts.length>0){w(!1);var t=e.Item.memberReceipts;C(t)}}catch(n){console.log(n)}})})},[]),Object(a.useEffect)(Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t).then(function(e){if(e.Item.isFinalized.BOOL){var n=JSON.parse(e.Item.finalTransferLog.S);k(n),setTimeout(function(){F("/viewgroup/admin/final/".concat(t),{replace:!0})},500)}});case 2:case"end":return e.stop()}},e)})),[]),b?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Group ",t),r.a.createElement("h3",null,"Group Members:"),r.a.createElement(ae,{groupID:t}),O?r.a.createElement("h2",null,"You don't have any receipts yet"):r.a.createElement("h2",null,"here are your receipts:"),O?r.a.createElement("div",null):r.a.createElement(V,{props:S}),r.a.createElement("br",null),r.a.createElement("h2",null,"You are all set! You can't add receipts anymore!"),r.a.createElement("h3",null,"Since you are the group admin, feel free to redo finished status for any member.")):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Group ",t),r.a.createElement("h3",null,"Group Members:"),r.a.createElement(ae,{groupID:t}),r.a.createElement("br",null)," ",r.a.createElement("hr",{style:{backgroundColor:"black",height:3}})," ",r.a.createElement("br",null),O?r.a.createElement("h2",null,"You don't have any receipts yet"):r.a.createElement("h2",null,"here are your receipts:"),O?r.a.createElement("div",null):r.a.createElement(V,{props:S}),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(Z,{props:S}),"   ",r.a.createElement($,{props:S})))},ce=function(){var e=Object(x.f)(),t=Object(x.g)(""),n=t.groupnr,a=t.role;return r.a.useEffect(function(){e("/viewgroup/".concat(a,"/").concat(n),{replace:!0})},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"aa ",n))},le=function(){var e=Object(x.g)("").groupnr,t=Object(a.useContext)(d).finishedAdminTable;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"The group ",e," is finalized"),t.map(function(e,t){return r.a.createElement("h2",{key:t},e.sender," should send ",e.amount," to ",e.receiver)}),r.a.createElement("br",null),r.a.createElement("h1",null,"Click here to start a new group"))},ue=function(){var e=Object(x.g)("").groupnr,t=Object(a.useContext)(d).finishedAdminTable,n=r.a.useState(),c=Object(s.a)(n,2),l=c[0],u=c[1],o=Object(a.useContext)(p).email;return r.a.useEffect(function(){var e=t.filter(function(e){return e.senderMail===o||e.receiverMail===o}),n=[];e.map(function(e){return e.senderMail===o?n.push("You should transfer ".concat(e.amount," to ").concat(e.receiver)):e.receiverMail===o&&n.push("You should expect to receive ".concat(e.amount," from ").concat(e.sender)),u(n),e})},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"The group ",e," is finalized"),l.map(function(e,t){return r.a.createElement("h2",{key:t},e)}),r.a.createElement("br",null),r.a.createElement("h1",null,"Click here to start a new group"))};j.default.configure(O);var oe=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"App"},r.a.createElement(f,null,r.a.createElement(v,null,r.a.createElement(w.a,null,r.a.createElement(D,null),r.a.createElement(x.c,null,r.a.createElement(x.a,{path:"/",exact:!0,element:r.a.createElement(S,null)}),r.a.createElement(x.a,{path:"/login",element:r.a.createElement(G,null)}),r.a.createElement(x.a,{path:"/signup",element:r.a.createElement(_,null)}),r.a.createElement(x.a,{path:"/joingroup",element:r.a.createElement(A,null)}),r.a.createElement(x.a,{path:"/startgroup",element:r.a.createElement(M,null)}),r.a.createElement(x.a,{path:"/groupstarted",element:r.a.createElement(U,null)}),r.a.createElement(x.a,{path:"/viewgroup/member/:groupnr",element:r.a.createElement(ee,null)}),r.a.createElement(x.a,{path:"/viewgroup/admin/:groupnr",element:r.a.createElement(re,null)}),r.a.createElement(x.a,{path:"/viewgroup/success/:groupnr/:role",element:r.a.createElement(ce,null)}),r.a.createElement(x.a,{path:"/receipttable",element:r.a.createElement(V,null)}),r.a.createElement(x.a,{path:"/viewgroup/admin/final/:groupnr",element:r.a.createElement(le,null)}),r.a.createElement(x.a,{path:"/viewgroup/member/final/:groupnr",element:r.a.createElement(ue,null)})))))))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(oe,null)),document.getElementById("root"))}},[[151,2,1]]]);
//# sourceMappingURL=main.806fd305.chunk.js.map